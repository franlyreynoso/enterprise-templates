{
  "name": "Enterprise Fullstack Workspace (Web + API)",
  "dockerComposeFile": "./docker-compose.devcontainer.yml",
  "service": "workspace",
  "workspaceFolder": "/workspace",
  "shutdownAction": "stopCompose",
  "features": {
    "ghcr.io/devcontainers/features/dotnet:2": {
      "version": "9.0",
      "additionalVersions": "8.0"
    },
    "ghcr.io/devcontainers/features/node:1": {
      "version": "20"
    },
    "ghcr.io/devcontainers/features/powershell:1": {
      "version": "latest"
    }
  },
  "customizations": {
    "vscode": {
      "extensions": [
        // Web-specific extensions
        "ms-dotnettools.blazorwasm-companion",
        "bradlc.vscode-tailwindcss",
        // API-specific extensions
        "ms-dotnettools.csharp",
        "ms-dotnettools.csdevkit",
        "ms-mssql.mssql",
        "cweijan.vscode-postgresql-client2",
        "ms-dotnettools.dotnet-interactive-vscode",
        // Shared development tools
        "ms-azuretools.vscode-docker",
        "ms-vscode.powershell",
        "ms-playwright.playwright",
        "streetsidesoftware.code-spell-checker",
        "EditorConfig.EditorConfig",
        "ms-vscode.vscode-json",
        "redhat.vscode-yaml",
        "GitHub.copilot",
        "ms-vscode.makefile-tools"
      ],
      "settings": {
        "dotnet.defaultSolution": "./WEB_PROJECT_NAME/*.sln",
        "files.exclude": {
          "**/bin": true,
          "**/obj": true,
          "**/.vs": true,
          "**/node_modules": true
        },
        "dotnet.server.useOmnisharp": false,
        "omnisharp.enableEditorConfigSupport": true,
        "editor.formatOnSave": true,
        "csharp.semanticHighlighting.enabled": true,
        "csharp.inlayHints.enableInlayHintsForParameters": true,
        "csharp.inlayHints.enableInlayHintsForLiteralParameters": true,
        "csharp.inlayHints.enableInlayHintsForIndexerParameters": true,
        "csharp.inlayHints.enableInlayHintsForObjectCreationParameters": true,
        "csharp.inlayHints.enableInlayHintsForOtherParameters": true,
        "docker.showStartPage": false,
        "makefile.configureOnOpen": false
      }
    }
  },
  "forwardPorts": [3000, 5100, 5432, 5341, 16686, 15672],
  "portsAttributes": {
    "3000": {
      "label": "Web Application",
      "protocol": "https"
    },
    "5100": {
      "label": "API",
      "protocol": "https"
    },
    "5432": {
      "label": "PostgreSQL",
      "protocol": "tcp"
    },
    "5341": {
      "label": "Seq (Logging)",
      "protocol": "http"
    },
    "16686": {
      "label": "Jaeger (Tracing)",
      "protocol": "http"
    },
    "15672": {
      "label": "RabbitMQ Management",
      "protocol": "http"
    }
  },
  "postCreateCommand": "make help && echo 'ðŸŽ‰ Enterprise Fullstack Workspace Ready! Run setup.ps1 to generate projects.'",
  "postStartCommand": "echo 'ðŸš€ Workspace started. Use \\\"make up-fullstack\\\" to start the complete environment.'",
  "remoteUser": "vscode",
  "mounts": [
    "source=fullstack-nuget,target=/home/vscode/.nuget,type=volume",
    "source=fullstack-npm,target=/home/vscode/.npm,type=volume"
  ],
  "runArgs": ["--init"]
}
